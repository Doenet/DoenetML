import { DoenetViewer, DoenetEditor, DoenetExample } from "../../components"

import { AttrDisplay, PropDisplay } from "../../components"


# ` <collect>{:dn}`


` <collect>{:dn}` is a [General Operator](../document_structure/essentialConcepts#component-types)
component that gathers discrete component data from a graph or 
sectional component and stores it in an array.

## Attributes and Properties 
 <AttrDisplay name='collect'/> 
 <PropDisplay name='collect'/>


---

### Example: Collect ` <point>{:dn}` children from a ` <graph>{:dn}`


```doenet-editor-horiz
<graph name="g" size="small">
  <point>(-8,-8)</point>
  <point>(-3,5)</point>
  <point>(6, 3)</point>
</graph>

<collect 
  name="collectPoints" 
  from="$g" 
  componentType="point"/>

<graph size="small">
  $collectPoints
</graph>
```



The ` <collect/>{:dn}` component is used to gather ` <point>{:dn}` 
children from a named ` <graph>{:dn}`.



---

### Example: Collect ` <textInput>{:dn}` children from a ` <repeat>{:dn}`


```doenet-editor-horiz
<p>How many words do you know? 
  <mathInput name="n"/>
</p>

<p>The words I know are:</p>
<repeatForSequence name="wordRepeat" from="1" to="$n">
  <textInput/>
</repeatForSequence>

<p>The collected <tag>textInput</tag> children: 
  <collect 
    name="collectWords" 
    from="$wordRepeat" 
    componentType="textInput"/>
</p>

<p>You know the words: 
  $collectWords.text 
</p>
```




The ` <collect/>{:dn}` component is used to gather ` <textInput>{:dn}` 
components generated by a ` <repeat>{:dn}`.



---

### Example: Collect user-added ` <point>{:dn}` children to draw a ` <polygon>{:dn}`


```doenet-editor-horiz
<graph name="g" xmin="-1" ymin="-1">
  <callAction 
    actionName="addChildren" 
    target="$g" 
    anchor="(8,1)">
      <point>
        (9* <sampleRandomNumbers/>,
        9* <sampleRandomNumbers/>)
      </point>
      <label>Add point</label>
  </callAction>

  <polygon 
    vertices="$collectPoints" 
    filled 
    styleNumber="3"/>
</graph>

<collect 
  name="collectPoints" 
  componentType="point" 
  from="$g"/>
```



The ` <collect/>{:dn}` component is used to gather ` <point>{:dn}` 
components generated by two ` <callAction>{:dn}` components 
within a ` <graph>{:dn}`. The named ` <collect/>{:dn}` is then referenced 
in the `vertices` attribute of a ` <polygon>{:dn}`.


---

### Example: ` <collect>{:dn}` function data

```doenet-editor-horiz
<setup>
  <collect 
    name="quadraticFunctions" 
    componentType="function" 
    from="$defineQuadratics"/>
</setup>

<subsection name="defineQuadratics" hide="true">
  <function name="f">x^2 - 2</function>
  <function name="g">-(x^2)/2+4</function>
  <function name="h">(x^2)/3-1</function>
</subsection>

<p>The collected functions are: 
  <m>\{f(x),g(x),h(x)\} =   
  \{</m>$quadraticFunctions<m>\}</m>
</p>

<graph>
  $quadraticFunctions
</graph>
```

The ` <collect>{:dn}` can be used for `function{:dn}` components as well 
as graphical components and that the set of data collected need not 
be contained in a `graph{:dn}`.  Any sectional component or module can 
be used with the `from` attribute inside the ` <collect>{:dn}` component.

---


### Example: Collecting a property of a component


```doenet-editor-horiz
<graph name="g" size="small">
  <circle />
  <circle radius="3/2"/>
  <circle radius="3"/>
</graph>

<collect 
  name="collectRadii" 
  componentType="circle" 
  from="$g"/>


<p>The collected radii are:
$collectRadii.radius</p>

<p>The second radius is: 
  $collectRadii[2].radius</p>
```

To access an individual property of a group of
collected components, refer to the name of the `<collect>{:dn}`
followed by the property name, such as `radius` in this example.

In order to access a specific component's property,
use the index of the component in square brackets, 
such as `$collectRadii[2].radius`.

---

### Attribute Example: from


```doenet-example
<graph name="g" size="small">
  <callAction 
    actionName="addChildren" 
    target="$g" 
    anchor="(-6,-8)">
      <point>(0,0)</point>
      <label>Add point</label>
  </callAction>
</graph>
<collect componentType="point" from="$g"/>
```



The `from` attribute specifies which named component the ` <collect>{:dn}` 
is gathering information from.



---

### Attribute Example: componentType


```doenet-example
<p>repeated mathInputs:</p>

<repeatForSequence name="blanksRepeat" from="1" to="3">
  <mathInput/>
</repeatForSequence>

<p>The collected mathInputs are:</p>
<collect 
  name="collectMathInputs"
  componentType="mathInput" 
  from="$blanksRepeat"/>

<p>The third <tage>mathInput</tage> is:</p>
  $collectMathInputs[3]
```



The `componentType` attribute specifies the type of component 
that is being collected from the reference listed in `from`.


---

### Attribute Example: maxNumber


```doenet-editor-horiz
<p>Number of points to repeat 
(type a number <m> > 3</m>): 
  <mathInput name="n"/>
</p>

<graph name="g" size="small">
  <repeatForSequence from="1" to="$n">
    <point>
        (<selectFromSequence from="-9" to="9"/>,
        <selectFromSequence from="-9" to="9"/>)
      </point>
  </repeatForSequence>
</graph>

<p>The first three points are: 
  <collect 
    name="collectPoints" 
    componentType="point" 
    from="$g" 
    maxNumber="3"/>
</p>
```

The `maxNumber` attribute sets a limit on the number of components to collect.

